<nav class="navbar navbar-expand-lg navbar-library">
    <a class="navbar-brand" href="#">LibGra</a>
    <button class="navbar-toggler" type="button" id="boton-style-app" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <!-- Enlaces de la izquierda -->
      <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" href="/">Inicio</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Biblioteca</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Acerca de</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Contacto</a>
        </li>
        <li class="nav-item" *ngIf="(esAdmin|| esSoid) && isLoggedIn">
          <a class="nav-link" href="#">Panel de Administrador</a>
          </li>
      </ul>
      <!-- Enlaces de la derecha -->
      <ul class="navbar-nav ml-auto">
        <li class="nav-item" *ngIf="!isLoggedIn">
          <a class="nav-link" routerLink="/login" routerLinkActive="active">Login</a>
        </li>
        <li class="nav-item" *ngIf="!isLoggedIn">
          <a class="nav-link" routerLink="/registro" routerLinkActive="active">Registro</a>
        </li>
        <li class="nav-item" *ngIf="isLoggedIn">
          <a class="nav-link" id="csesion" (click)="logout()">Cerrar sesión</a>
        </li>
        <li class="nav-item" *ngIf="isLoggedIn">
          <img [src]="this.fotoServ" class="rounded-circle" alt="User Image" style="width: 40px; height: 40px; margin-left: 10px;">
        </li>
      </ul>
    </div>
  </nav>


    <div class="container">

        <div class="row">
            <div class="col-sm-4" style="margin-top: 50px;">
                <div class="text-center">
                    <img [src]="baseUrl+usuario.AVATAR" class="avatar img-circle img-thumbnail"
                        alt="avatar">
                    <h6>Upload a different photo...</h6>
                    <input type="file" class="text-center center-block file-upload" (change)="onFileSelected($event)">
                    <button type="button" class="btn btn-primary mt-2" (click)="guardarAvatar()">Guardar Avatar</button>
                </div>
                <br>

                <div class="panel panel-default">
<!-- Botón para mostrar el formulario -->
<button type="button" class="btn btn-primary" (click)="toggleForm()">
    Cambiar Contraseña
  </button>
  
  <!-- Contenedor para el formulario de cambio de contraseña -->
  <div *ngIf="showForm" class="password-form-container">
    <form #passwordForm="ngForm">
      <div class="form-group">
        <label for="password">
          <h4>Contraseña</h4>
        </label>
        <input type="password" class="form-control" name="PASSWORD" id="PASSWORD" placeholder="Contraseña" [(ngModel)]="password">
      </div>
      <div class="form-group">
        <label for="password2">
          <h4>Verifica la Contraseña</h4>
        </label>
        <input type="password" class="form-control" name="password2" id="password2" placeholder="Verifica la contraseña" [(ngModel)]="password2">
      </div>
      <button type="button" class="btn btn-primary" (click)="guardarCambios()">Guardar Cambios</button>
      <button type="button" class="btn btn-secondary" (click)="toggleForm()">Cancelar</button>
    </form>
  </div>
  
  

<br>

                </div>

                <ul class="list-group">
                    <li class="list-group-item text-muted">Actividad <i class="fa fa-dashboard fa-1x"></i></li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>ROLE: </strong></span> {{usuario.ROLE}}
                    </li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Libros Leidos: </strong></span> {{this.arrayLibrosLeidos.length}}</li>
                    <li class="list-group-item text-right"><span class="pull-left"*ngIf="(esEditor || esAdmin || esSoid)"><strong>Libros Subidos: {{libros_usuario.length}} </strong></span> </li>
                </ul>
            </div>

            <div class="col-sm-8" style="margin-top: 50px;">
                <ul class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#home">Perfil</a></li>
                </ul>


                <div class="tab-content">
                    <div class="tab-pane active" id="home">
                        <hr>
                        <form class="form" action="##" method="post" id="registrationForm">
                            <div class="form-group">

                                <div class="col-xs-6">
                                    <label for="nombre">
                                        <h4>Nombre</h4>
                                    </label>
                                    <input type="text" class="form-control" name="NOMBRE" id="NOMBRE"
                                        placeholder="{{usuario.NOMBRE}}">
                                </div>
                            </div>
                            <div class="form-group">

                                <div class="col-xs-6">
                                    <label for="last_name">
                                        <h4>Apellidos</h4>
                                    </label>
                                    <input type="text" class="form-control" name="APELLIDOS" id="APELLIDOS"
                                        placeholder=" {{usuario.APELLIDOS}}">
                                </div>
                            </div>

                            <div class="form-group">

                                <div class="col-xs-6">
                                    <label for="EMAIL">
                                        <h4>E-mail </h4>
                                    </label>
                                    <input type="email" class="form-control" name="EMAIL" id="EMAIL"
                                        placeholder="{{usuario.EMAIL}}">
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-xs-6">
                                    <label for="mobile">
                                        <h4>Nombre en la APP</h4>
                                    </label>
                                    <input type="text" class="form-control" name="movil" id="movil"
                                        placeholder="{{usuario.NAMEAPP}}">
                                </div>
                            </div>
                            <div class="form-group">

                                <div class="col-xs-6">
                                    <label for="email">
                                        <h4>Sexo</h4>
                                    </label>
                                    <select class="form-control" name="SEXO" id="SEXO">
                                        <option value="Hombre" [selected]="usuario.SEXO === 'Hombre'">Hombre</option>
                                        <option value="Mujer" [selected]="usuario.SEXO === 'Mujer'">Mujer</option>
                                        <option value="Otro" [selected]="usuario.SEXO === 'Otro'">Otro</option>
                                    </select>                                   
   
                                </div>
                            </div>
                            <div class="form-group">

                                <div class="col-xs-6">
                                    <label for="ciudad">
                                        <h4>DIRECCIÓN</h4>
                                    </label>
                                    <input type="text" class="form-control" id="DIRECCION" placeholder="{{usuario.DIRECCION}}">
                                </div>
                            </div>
                            <div class="form-group">

                                <div class="col-xs-6">
                                    <label for="ciudad">
                                        <h4>POBLACION</h4>
                                    </label>
                                    <input type="text" class="form-control" id="DIRECCION" placeholder="{{usuario.ID_POBLACION}}">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-xs-12">
                                    <br>
                                    <button class="btn btn-success" type="submit"><i
                                            class="glyphicon glyphicon-ok-sign"></i> Guardar</button>
                                    <button class="btn btn-danger" type="reset"><i
                                            class="glyphicon glyphicon-repeat"></i> Limpiar</button>
                                </div>
                            </div>
                        </form>

                        <hr>

                    </div>
                </div>

            </div>
        </div>

        <script type="text/javascript">
            $(document).ready(function () {
                var readURL = function (input) {
                    if (input.files && input.files[0]) {
                        var reader = new FileReader();

                        reader.onload = function (e) {
                            $('.avatar').attr('src', e.target.result);
                        }

                        reader.readAsDataURL(input.files[0]);
                    }
                }

                $(".file-upload").on('change', function () {
                    readURL(this);
                });
            });
        </script>

